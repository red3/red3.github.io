<p>本文是我依据 WWDC15 Session Video 写的一篇笔记，涉及的 Session 有</p>

<p>-<a href="https://developer.apple.com/videos/wwdc/2015/?id=404">App Thinning in Xcode</a></p>

<h2 id="section">重要</h2>
<ul>
  <li>苹果指出，使用App-Thinning的前提是使用Asset Catalog管理资源文件</li>
  <li>在苹果的演示中，一个约74M的应用程序经过Thinning后变为约22M，效果还是很惊人的</li>
</ul>

<h2 id="section-1">我们需要了解的</h2>
<ul>
  <li>如何使应用程序的体积变得越小</li>
  <li>开发和提交应用程序的时候需要做些什么以使App-Thinning生效</li>
</ul>

<h2 id="work-flow">Work Flow</h2>

<h3 id="section-2">创建</h3>

<p>苹果说明必须使用Asset Catalog管理资源文件才可以使App-Thinning生效，Xcode7.0以前新建的默认工程里面有Images.xcassets这个文件夹是管理图片资源的，Xcode7.0以后默认生成Assets.xcassets文件夹，用来管理Image Set、Data Set以及Sprite Atlas，看来以前使用自己创建的文件夹方式管理图片的同学要尽快迁移到Assets下，迁移的方式也很简单，
选中工程中的Images.xcassets文件夹，然后选中文件目录树下方的”+”，然后选择”Import From Project”，这是Xcode已经自动把工程中的全部图片选中。</p>

<h3 id="section-3">编译</h3>

<ul>
  <li>Xcode在编译运行的时候能够自动根据当前选中设备（模拟器或者真机都可以）选择适合设备的资源</li>
  <li>如果不想使用App-Thinning，可以在build setting中Asset Catalog Compiler中更改Enable_Building_Only_Active_Resources这个选项，默认设置是YES</li>
  <li>速度提升，因为运行的时候，只会把适合当前设备的资源文件进行拷贝，以前是一股脑的都拷贝了</li>
</ul>

<h3 id="section-4">提交</h3>

<ul>
  <li>如果是提交到AppStore，和以往一样提交就行</li>
  <li>Ad-hoc/Enterprise Distribution可以根据设备导出对应的ipa文件</li>
  <li>企业证书通过Over-the-Air安装，也就是采用itms-service协议直接通过浏览器安装的时候，需要勾选”Include manifest for over-the-air installation”选项，这样不同的设备会自动对应到适应的安装包</li>
</ul>

<p><img src="/assets/2015/ad-hoc-app-thinning.jpg" alt="" /></p>

<h2 id="section-5">总结</h2>
<p>应该说给App瘦身这件事是近几年呼声挺高的一件事，而今年在Xcode7上苹果加入了这个功能，并且可以让开发者以极其小的付出就可以拥抱这次变化，可谓大快人心！</p>

